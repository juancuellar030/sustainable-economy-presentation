<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacia un Enfoque Integrado</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="content-page">

    <div class="slide-container">
        <div class="card">
            <h2>Hacia un Enfoque Integrado: Cerrando la Brecha</h2>
            <p>Navega el laberinto desde la economía tradicional para descubrir un enfoque sostenible.</p>
            
            <div class="maze-container" id="maze-container">
                <div class="maze-svg-wrapper">
                    
                    <!-- CORRECTED AND EMBEDDED SVG CODE -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 414 338.05">
                        <g id="maze-walls">
                            <!-- This group now contains all the paths for your maze walls -->
                            <path d="M70.72,143.38c6.42,1.28,21.05,4.19,27.47,5.46,1.32-7.48,3.4-14.9,6.14-21.9l18.48,7.66c-9.12,23.38-8.41,50.57,1.92,73.45,3.04-1.26,17.93-7.43,21.27-8.81,7.22,15.9,20.3,28.99,36.2,36.2-4.53,10.93-11.93,28.8-16.47,39.75-6.98-3.08-13.59-6.81-19.8-11.18-1.83,2.73-10.77,16.11-12.77,19.12-36.23-24.96-59.23-67.5-59.71-111.62h18c.51,31.85,14.26,62.85,37.24,84.77,4.72-4.72,16.48-16.48,21.21-21.21-1.21-1.15-2.39-2.32-3.54-3.54-2.27,2.27-15.12,15.12-17.67,17.67-21.14-21.9-33.03-52.19-32.24-82.7h-28c-1.26,49.16,24.72,97.23,66.08,123.57,1.83-2.73,10.77-16.11,12.77-19.12,5.24,3.36,10.76,6.32,16.51,8.85-1.42,3.43-7.51,18.13-8.8,21.25,1.53.67,3.06,1.31,4.61,1.93,9.26-22.37,19.83-47.88,29.1-70.24-26.94-9.74-45.69-37.57-44.24-66.23h-5c-.36,9.56,1.25,19.19,4.58,28.11l-16.64,6.89c-7.99-20.61-7.99-44.39,0-65,3.43,1.42,18.14,7.51,21.26,8.81,3.71-9.91,9.73-18.9,17.48-26.09l-3.53-3.53c-6.98,6.53-12.68,14.39-16.64,23.1-10.93-4.53-28.8-11.93-39.75-16.47,6.14-13.93,15.01-26.54,25.98-37.05l-3.53-3.53c-17.17,16.45-29.34,37.92-34.44,61.21-11.6-2.31-30.57-6.08-42.2-8.39,10.67-51.21,47.25-95.59,95.29-116.12,4.55,10.97,11.94,28.83,16.47,39.77-5.75,2.53-11.27,5.49-16.51,8.85-2.06-3.09-10.9-16.31-12.77-19.12-25.2,16.24-45.08,40.37-56.09,68.28l4.62,1.91c10.03-25.44,27.66-47.65,50.1-63.24,2.06,3.09,10.9,16.31,12.78,19.12,6.21-4.37,12.81-8.09,19.8-11.18l7.65,18.48c-11.5,5.14-21.91,12.52-30.56,21.64l3.54,3.54c17.49-18.64,42.96-29.27,68.56-28.44v-5c-12.6-.33-25.23,1.84-36.91,6.35-8.1-19.56-17.94-43.32-26.04-62.88,18.38-7.29,37.98-11.19,57.96-11.48v25c1.66-.04,3.34-.04,5,0V5.05c19.97.29,39.58,4.19,57.96,11.48l-7.67,18.51c-8.67-3.43-17.86-6.04-27.15-7.73-.64,3.22-3.78,19.02-4.49,22.57-13.74-2.46-28.56-2.46-42.3,0-.72-3.64-3.83-19.25-4.49-22.57-1.65.3-3.28.63-4.9.98,1.28,6.42,4.19,21.05,5.46,27.47,16.31-3.64,33.84-3.64,50.16,0,.64-3.22,3.78-19.02,4.49-22.56,8.99,1.96,17.6,4.73,25.92,8.39,1.23-2.96,8.2-19.8,9.59-23.14,18.24,7.89,34.88,19.06,49.1,32.86-2.63,2.63-15.39,15.39-17.72,17.72,1.2,1.16,2.38,2.34,3.54,3.54,2.27-2.27,15.17-15.17,17.72-17.72,22.48,23.11,37.88,52.82,43.63,84.63l4.92-.98C365.63,60.12,291.92-1.35,212.43.02,132.94-1.35,59.22,60.12,46.17,138.5c3.16.63,20.99,4.18,24.54,4.88Z"/>
                            <path d="M381.4,166.52h-73c-.33-12.64-3.14-25.05-8.27-36.53l-4.62,1.91c20.89,44.16-1.05,101.15-45.96,120.2-1.42-3.43-7.52-18.15-8.81-21.27-8.08,3.74-16.87,5.82-25.81,6.13v-18c24.97-.82,46.62-22.47,47.44-47.44h18c-.56,17.86-8.58,35.19-21.69,47.29l3.53,3.53c29.2-26.08,30.9-75.09,3.54-103.11,8.36-8.36,22.03-22.03,30.41-30.41,15.79,16.44,26.57,37.52,30.51,60.02,6.42-1.28,21.05-4.19,27.47-5.46-3.66-20.26-11.7-39.58-23.43-56.4l-4.16,2.78c10.41,14.93,17.83,31.82,21.7,49.69l-17.66,3.51c-6.4-29.43-24.24-55.91-48.9-73.1,2.06-3.09,10.9-16.31,12.77-19.12-1.37-.95-2.75-1.88-4.15-2.79-1.83,2.73-10.77,16.11-12.77,19.12-6.63-4.25-13.75-7.88-21.13-10.77-1.23,2.97-8.19,19.77-9.57,23.11,1.56.6,3.1,1.24,4.62,1.92l7.65-18.48c12.4,5.46,23.75,13.09,33.51,22.45-9.93,9.93-24.06,24.06-33.95,33.95,13.1,12.1,21.13,29.42,21.69,47.29h-18c-.82-24.97-22.47-46.62-47.44-47.44v-18c8.93.32,17.72,2.4,25.81,6.13l1.91-4.62c-18.85-8.73-41.59-8.73-60.44,0l1.91,4.62c8.08-3.74,16.87-5.81,25.81-6.13v18c-62.81,4.78-62.76,95.12,0,99.87v23c9.56.36,19.19-1.25,28.11-4.58,1.42,3.43,7.51,18.14,8.81,21.26,35.59-13.34,60.97-49.04,61.55-87.12h20c-.17,7.73-1.06,15.16-2.71,22.58l4.9.98c1.71-7.73,2.63-15.49,2.8-23.55h43c-.4,30.73-9.58,60.89-26.22,86.53-3.09-2.07-18.09-12.08-20.83-13.92-.9,1.4-1.84,2.78-2.79,4.15,2.67,1.78,17.84,11.92,20.84,13.92-11.28,16.31-25.46,30.49-41.78,41.78-6.6-9.88-17.34-25.95-23.92-35.8,5.13-3.59,9.96-7.57,14.47-11.89l16.26,16.26c1.2-1.16,2.38-2.34,3.54-3.54l-16.26-16.26c9.81-10.23,17.82-22.12,23.53-35.13,3.43,1.42,18.13,7.51,21.25,8.8,4.44-10.11,7.66-20.8,9.66-31.76l-4.9-.98c-1.63,8.96-4.14,17.84-7.45,26.21-3.43-1.42-18.13-7.51-21.26-8.81-14.27,37.18-48.62,65.5-87.93,72.17.64,3.23,3.78,19.02,4.49,22.57-8.79,1.58-18.06,2.34-27.16,2.16v5c20.62.37,41.14-3.7,59.9-11.92l-1.91-4.62c-8.33,3.66-16.93,6.43-25.92,8.39l-3.51-17.66c13.91-3.06,27.13-8.58,39.06-16.22,6.57,9.84,17.33,25.93,23.92,35.8-34.47,22.58-78.03,31.11-118.57,23.6,2.32-11.64,6.08-30.59,8.39-42.19,7.66,1.36,15.73,1.99,23.65,1.82v-30c-1.66.05-3.34.05-5,0v25c-7.73-.17-15.16-1.06-22.58-2.71-2.72,13.7-6.63,33.35-9.37,47.1-74.84-14.93-131.9-86.51-129.52-162.86h-5c-3.15,91.92,77.02,173.26,168.97,171.5,91.93,1.77,172.13-79.59,168.97-171.5Z"/>
                        </g>
                        <!-- This is the path for the solution line -->
                        <path id="solution-path" d="M.5,152.56c19,.33,38,.67,57,1-4.42,76.78,40.83,143.01,109,162,4.33-15,8.67-30,13-45,3.33.67,6.67,1.33,10,2l9-45c-51.2-11.36-62.36-79.77-20-108-4.33-6.33-8.67-12.67-13-19,16.55-13.5,40.96-15.77,62-13,1.67-7.67,3.33-15.33,5-23,3.33,1,6.67,2,10,3,2.33-7.33,4.67-14.67,7-22,7.18,1.56,17.05,5.49,23,9,3.67-6.67,7.33-13.33,11-20,8.54,3.12,17.84,8.24,25,17-4.67,6-9.33,12-14,18,6.6,4.76,11.56,10.31,17,17,6-4.67,12-9.33,18-14,22.37,25.2,30.74,49.58,34,81h46"/>
                    </svg>
                </div>

                <!-- Clickable Hotspots -->
                <div class="maze-hotspot" id="hotspot-start" style="top: 47%; left: 23%;"></div>
                <div class="maze-hotspot" id="hotspot-e" style="top: 77%; left: 48%;"></div>
                <div class="maze-hotspot" id="hotspot-f" style="top: 44%; left: 44%;"></div>
                <div class="maze-hotspot" id="hotspot-s" style="top: 16%; left: 60%;"></div>
                <div class="maze-hotspot" id="hotspot-end" style="top: 47%; left: 79%;"></div>
            </div>
        </div>
    </div>

    <!-- Popup structure -->
    <div class="maze-popup-overlay" id="maze-popup-overlay">
        <div class="maze-popup-panel">
            <button class="close-btn" id="close-maze-popup-btn">&times;</button>
            <h3 id="maze-popup-title"></h3>
            <p id="maze-popup-description"></p>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // THE FIX IS HERE: The complete mazeData object is now restored.
        const mazeData = {
            'hotspot-start': { title: 'Punto de Partida: La "Economía Tradicional"', description: 'Este punto representa un universo económico aislado del mundo físico. Mide la producción con el "valor añadido", sin considerar el contenido físico, asumiendo que los recursos naturales son inagotables y los desechos irrelevantes.' },
            'hotspot-e': { title: 'Parada 1: "Eficiencia (E)"', description: 'Este pilar se basa en las preferencias individuales y se mide por la disposición a pagar. Busca la asignación de recursos según la capacidad de pago, siendo clave para el desarrollo sostenible.' },
            'hotspot-f': { title: 'Parada 2: "Justicia (F)"', description: 'Busca el consenso sobre valores justos para todos, incluyendo otras especies y generaciones futuras. Aborda la necesidad de una distribución equitativa de recursos y requiere políticas de transferencias para el beneficio social.' },
            'hotspot-s': { title: 'Parada 3: "Sostenibilidad (S)"', description: 'Es un principio ético que busca la perpetuación de la vida humana. Se define como el desarrollo que satisface las necesidades del presente sin comprometer la capacidad de las generaciones futuras de satisfacer las propias.' },
            'hotspot-end': { title: 'Destino Final: "Ecología y Patrimonio Natural"', description: 'Este destino representa la integración de la economía con la realidad biofisica. Busca un enfoque "ecointegrador" para reconciliar la utilidad económica con la estabilidad ecológica, promoviendo la conciencia colectiva y estilos de vida sostenibles.' }
        };
        
        const hotspots = Array.from(document.querySelectorAll('.maze-hotspot'));
        const popupOverlay = document.getElementById('maze-popup-overlay');
        const closeBtn = document.getElementById('close-maze-popup-btn');
        const popupTitle = document.getElementById('maze-popup-title');
        const popupDescription = document.getElementById('maze-popup-description');
        const solutionPath = document.getElementById('solution-path');
        
        const totalPathLength = solutionPath.getTotalLength();
        const pathStops = [0, 0.33, 0.5, 0.75, 1];
        let currentState = 0;
        
        // THE FIX IS HERE: This line was missing.
        let mazeCompleted = false;

        solutionPath.style.strokeDasharray = totalPathLength;
        solutionPath.style.strokeDashoffset = totalPathLength;

        const advanceState = () => {
            // If the maze is already complete, do nothing.
            if (mazeCompleted) return;
            
            // Deactivate current hotspot
            hotspots[currentState].classList.remove('active');
            
            if (currentState >= hotspots.length - 1) {
                // MAZE IS NOW COMPLETE
                mazeCompleted = true;
                // Make all hotspots non-pulsing but clickable
                hotspots.forEach(h => h.classList.remove('active'));
                return;
            }
            
            currentState++;
            
            const nextStopProgress = pathStops[currentState];
            solutionPath.style.strokeDashoffset = totalPathLength * (1 - nextStopProgress);
            
            setTimeout(() => {
                hotspots[currentState].classList.add('revealed', 'active');
            }, 1500);
        };

        const closePopup = () => {
            popupOverlay.classList.remove('active');
            advanceState();
        };

        hotspots.forEach((hotspot, index) => {
            hotspot.addEventListener('click', () => {
                // Allow clicks if the maze is complete, OR if it's the current active hotspot
                if (mazeCompleted || index === currentState) {
                    const data = mazeData[hotspot.id];
                    popupTitle.textContent = data.title;
                    popupDescription.textContent = data.description;
                    popupOverlay.classList.add('active');
                }
            });
        });
        
        closeBtn.addEventListener('click', closePopup);
        popupOverlay.addEventListener('click', e => { if (e.target === popupOverlay) closePopup(); });
        
        hotspots[0].classList.add('revealed', 'active');
    });
    </script>
</body>
</html>
