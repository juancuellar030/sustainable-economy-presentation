<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Por qué el Cuidado Ambiental es Fundamental</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="content-page">

    <div class="slide-container">
        <div class="card">
            <h2>Por qué el Cuidado Ambiental es Fundamental</h2>
            <p>El cambio climático y la degradación ambiental son desafíos críticos, intrínsecamente ligados a nuestros modelos socioeconómicos.</p>

            <div class="interactive-buttons">
                <button class="button interactive-btn" id="stats-btn">Estadísticas</button>
                <button class="button interactive-btn" id="impact-btn">Impacto Visual</button>
            </div>

            <div class="info-box-container">
                <!-- Stats Content (No changes here) -->
                <div id="stats-content" class="info-box">
                    <div class="line-chart-grid">
                        <div class="line-chart">
                            <h3>Disminución Global</h3>
                            <svg viewBox="0 0 200 120"><line class="axis" x1="30" y1="10" x2="30" y2="110"/><text class="label" x="25" y="15">100%</text><text class="label" x="25" y="115">0%</text><line class="axis" x1="30" y1="110" x2="190" y2="110"/><text class="label" x="30" y="120" text-anchor="middle">Inicio</text><text class="label" x="190" y="120" text-anchor="middle">38 Años</text><polyline id="global-line" class="data-line" points="30,10 190,40"/></svg>
                        </div>
                        <div class="line-chart">
                            <h3>Disminución Tropical</h3>
                            <svg viewBox="0 0 200 120"><line class="axis" x1="30" y1="10" x2="30" y2="110"/><text class="label" x="25" y="15">100%</text><text class="label" x="25" y="115">0%</text><line class="axis" x1="30" y1="110" x2="190" y2="110"/><text class="label" x="30" y="120" text-anchor="middle">Inicio</text><text class="label" x="190" y="120" text-anchor="middle">38 Años</text><polyline id="tropical-line" class="data-line red" points="30,10 190,70"/></svg>
                        </div>
                    </div>
                    <p class="chart-caption">La biodiversidad mundial ha disminuido un 30% en 38 años... [etc]</p>
                </div>

                <!-- MODIFIED: New HTML Structure for the NASA-style slider -->
                <div id="impact-content" class="info-box">
                    <div class="comparison-slider" id="comparison-slider">
                        <!-- Both images are direct children, perfectly stacked -->
                        <img src="images/after-image.jpg" alt="After" class="comparison-image">
                        <img src="images/before-image.jpg" alt="Before" class="comparison-image" id="before-image">
                
                        <!-- The handle sits on top -->
                        <div class="slider-handle" id="slider-handle">
                            <div class="handle-grabber"></div>
                        </div>

                        <!-- NEW: Add the label here -->
                        <div class="image-label">Lago Poyang, China</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const statsBtn = document.getElementById('stats-btn');
        const impactBtn = document.getElementById('impact-btn');
        const statsContent = document.getElementById('stats-content');
        const impactContent = document.getElementById('impact-content');

        statsBtn.addEventListener('click', () => {
            impactContent.classList.remove('active');
            statsContent.classList.add('active');
            animateLineGraph('global-line'); animateLineGraph('tropical-line');
        });

        impactBtn.addEventListener('click', () => {
            statsContent.classList.remove('active');
            impactContent.classList.add('active');
        });

        function animateLineGraph(lineId) {
            const line = document.getElementById(lineId);
            if (line) {
                const length = line.getTotalLength();
                line.style.strokeDasharray = length;
                line.style.strokeDashoffset = length;
                line.classList.add('animate-draw');
            }
        }
        
        // --- FINAL CORRECTED: JavaScript logic for the clip-path slider ---
        const slider = document.getElementById('comparison-slider');
        const handle = document.getElementById('slider-handle');
        const beforeImage = document.getElementById('before-image'); // Target the image directly
        let isDragging = false;
        
        const startDrag = () => { isDragging = true; };
        const stopDrag = () => { isDragging = false; };
        
        const doDrag = (e) => {
            if (!isDragging) return;
            
            // Use touch or mouse event coordinates
            const clientX = e.clientX || e.touches[0].clientX;
            const rect = slider.getBoundingClientRect();
            let offsetX = clientX - rect.left;
            
            // Constrain movement within the slider bounds
            if (offsetX < 0) offsetX = 0;
            if (offsetX > rect.width) offsetX = rect.width;
            
            // Calculate the percentage
            const percentage = (offsetX / rect.width) * 100;
            
            // Move the handle and update the clip-path of the top image
            handle.style.left = percentage + '%';
            beforeImage.style.clipPath = `polygon(0 0, ${percentage}% 0, ${percentage}% 100%, 0 100%)`;
        };
        
        // Mouse Events
        handle.addEventListener('mousedown', startDrag);
        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('mousemove', doDrag);
        
        // Touch Events
        handle.addEventListener('touchstart', startDrag, { passive: true });
        document.addEventListener('touchend', stopDrag);
        document.addEventListener('touchmove', doDrag);
    });
    </script>

</body>
</html>
